<nav
  class="bg-white border-gray-200 px-2 sm:px-4 py-2.5 rounded dark:bg-gray-900"
>
  <div class="container flex flex-wrap items-center justify-between mx-auto">
    <%= link_to root_path do %>
      <%= image_tag "logo.png", size: "120x30", class: "rounded-lg" %>
    <% end %>
    <%= render("partials/search") %>

    <button
      data-collapse-toggle="navbar-default"
      type="button"
      class="
        inline-flex
        items-center
        p-2
        ml-3
        text-sm
        text-gray-500
        rounded-lg
        md:hidden
        hover:bg-gray-100
        focus:outline-none
        focus:ring-2
        focus:ring-gray-200
        dark:text-gray-400
        dark:hover:bg-gray-700
        dark:focus:ring-gray-600
      "
      aria-controls="navbar-default"
      aria-expanded="false"
    >
      <span class="sr-only">Open main menu</span>
      <svg
        class="w-6 h-6"
        aria-hidden="true"
        fill="currentColor"
        viewBox="0 0 20 20"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fill-rule="evenodd"
          d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"
          clip-rule="evenodd"
        >
        </path>
      </svg>
    </button>
    <div class="hidden w-full md:block md:w-auto" id="navbar-default">
      <ul
        class="
          flex
          flex-col
          p-4
          mt-4
          border
          border-gray-100
          rounded-lg
          bg-gray-50
          md:flex-row
          md:space-x-8
          md:mt-0
          md:text-sm
          md:font-medium
          md:border-0
          md:bg-white
          dark:bg-gray-800
          md:dark:bg-gray-900
          dark:border-gray-700
        "
      >
        <% pages_titles.each do |title| %>
          <% if title == 'Home' %>
            <%= link_to 'Home', root_path, class:  "block py-2 pl-3 pr-4 text-gray-700 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 dark:text-gray-400 md:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent" %>
          <% else %>
            <%= link_to title, polymorphic_path(title.downcase), class: "block py-2 pl-3 pr-4 text-gray-700 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 dark:text-gray-400 md:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent" %>
          <% end %>
        <% end %>

        <% if current_user %>
          <li class="dropdown">
            <button
              class="
                block
                py-2
                pl-3
                pr-4
                text-gray-700
                rounded
                hover:bg-gray-100
                md:hover:bg-transparent
                md:border-0
                md:hover:text-blue-700
                md:p-0
                dark:text-gray-400
                md:dark:hover:text-white
                dark:hover:bg-gray-700
                dark:hover:text-white
                md:dark:hover:bg-transparent
              "
            >
              <%= current_user.first_name %>
              <svg
                class="w-4 h-4 ml-2"
                aria-hidden="true"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 9l-7 7-7-7"
                ></path>
              </svg>
            </button>
            <div class="dropdown-content">
              <ul
                class="py-2 text-sm text-gray-700 dark:text-gray-200"
                aria-labelledby="dropdownDefaultButton"
              >
                <% if current_user.owner? %>
                  <li>
                    <%= link_to "My properties",
                    my_properties_path,
                    class:
                      "block
                                                                                                                                        px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600
                                                                                                                                        dark:hover:text-white" %>
                  </li>
                  <li>
                    <%= link_to "Add property",
                    new_property_path,
                    class:
                      "block
                                                                                                                                        px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600
                                                                                                                                        dark:hover:text-white" %>
                  </li>
                <% end %>
                <li>
                  <%= link_to "My bookings",
                  bookings_path,
                  class:
                    "block px-4 py-2
                                                                                                                            hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white" %>
                </li>
                <li>
                  <%= button_to "Logout",
                  logout_path,
                  method: :delete,
                  class:
                    "block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600
                                                                                                                            dark:hover:text-white" %>
                </li>
              </ul>
            </div>
          </li>

        <% else %>
          <li>
            <%= link_to "Login",
            login_path,
            class:
              "block py-2 pl-3 pr-4
                                                                                  text-gray-700 rounded hover:bg-gray-100 md:hover:bg-transparent
                                                                                  md:border-0 md:hover:text-blue-700 md:p-0 dark:text-gray-400
                                                                                  md:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white
                                                                                  md:dark:hover:bg-transparent" %>
          </li>
        <% end %>
      </ul>
    </div>
  </div>
</nav>
